(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{9539:(e,t,s)=>{Promise.resolve().then(s.bind(s,1836))},1836:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(5155),r=s(2115),a=s(2651);let i=()=>{let[e,t]=(0,r.useState)(!0),[s,i]=(0,r.useState)({name:"",mobile:"",address:"",gstin:""}),[l,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(""),[h,g]=(0,r.useState)([{name:"",quantity:"",rate:"",gst:"18",hsn:"998717"}]);(0,r.useEffect)(()=>{a.A.get("http://15.207.48.53:3000/customers").then(e=>{o(e.data)}).catch(e=>console.error("Error fetching customers:",e))},[]);let x=(e,t)=>{i({...s,[e]:t})},p=e=>{let t=[...h];t.splice(e,1),g(t)},y=async()=>{try{let e=await a.A.post("http://15.207.48.53:3000/generate-bill",{customerName:s.name,customerMobile:s.mobile,customerAddress:s.address,customerGstin:s.gstin,products:h.map(e=>({name:e.name,quantity:parseFloat(e.quantity),rate:parseFloat(e.rate),gst:parseFloat(e.gst),hsn:e.hsn}))});200===e.status&&window.alert("Invoice generated successfully!")}catch(e){console.error("Error generating invoice:",e),window.alert("Failed to generate invoice.")}};return(0,n.jsxs)("div",{style:{padding:20},children:[(0,n.jsxs)("div",{style:{flexDirection:"row",display:"flex",justifyContent:"space-between",marginBottom:20},children:[(0,n.jsx)("button",{onClick:()=>t(!0),style:{flex:1,margin:"0 5px"},children:"New Customer"}),(0,n.jsx)("button",{onClick:()=>t(!1),style:{flex:1,margin:"0 5px"},children:"Existing Customer"})]}),e?(0,n.jsxs)("div",{style:{marginBottom:20,border:"1px solid #ccc",padding:10},children:[(0,n.jsx)("h3",{children:"New Customer Details"}),["name","mobile","address","gstin"].map((e,t)=>(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsx)("label",{children:"Customer ".concat(e.charAt(0).toUpperCase()+e.slice(1))}),(0,n.jsx)("input",{value:s[e],onChange:t=>x(e,t.target.value),style:{width:"100%",marginBottom:5},type:"mobile"===e?"number":"text",autoCapitalize:"gstin"===e?"characters":"none"})]},t))]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{marginBottom:20,border:"1px solid #ccc",padding:10},children:[(0,n.jsx)("h3",{children:"Search Existing Customer"}),(0,n.jsx)("input",{placeholder:"Search by name or mobile",value:m,onChange:e=>u(e.target.value),style:{width:"100%",marginBottom:5}}),(0,n.jsx)("button",{onClick:()=>{let e=l.find(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.mobile.includes(m));e?(c(e),i(e)):window.alert("No customer matches your search.")},children:"Search"})]}),d&&(0,n.jsxs)("div",{style:{marginBottom:20,border:"1px solid #ccc",padding:10},children:[(0,n.jsx)("h3",{children:"Customer Details"}),["name","mobile","address","gstin"].map((e,t)=>(0,n.jsxs)("div",{style:{marginBottom:10},children:[(0,n.jsx)("label",{children:"Customer ".concat(e.charAt(0).toUpperCase()+e.slice(1))}),(0,n.jsx)("input",{value:s[e],onChange:t=>x(e,t.target.value),style:{width:"100%",marginBottom:5},type:"text"})]},t))]})]}),(0,n.jsxs)("div",{style:{marginBottom:20,border:"1px solid #ccc",padding:10},children:[(0,n.jsx)("h3",{children:"Products"}),h.map((e,t)=>(0,n.jsxs)("div",{style:{border:"1px solid #ccc",padding:10,marginBottom:10},children:[(0,n.jsx)("h4",{children:"Product ".concat(t+1)}),(0,n.jsxs)("div",{style:{marginBottom:5},children:[(0,n.jsx)("label",{children:"Product Name"}),(0,n.jsx)("input",{value:e.name,onChange:e=>{let s=[...h];s[t].name=e.target.value,g(s)},style:{width:"100%",marginBottom:5},type:"text"})]}),(0,n.jsxs)("div",{style:{marginBottom:5},children:[(0,n.jsx)("label",{children:"Quantity"}),(0,n.jsx)("input",{value:e.quantity,onChange:e=>{let s=[...h];s[t].quantity=e.target.value,g(s)},style:{width:"100%",marginBottom:5},type:"number"})]}),(0,n.jsxs)("div",{style:{marginBottom:5},children:[(0,n.jsx)("label",{children:"Rate"}),(0,n.jsx)("input",{value:e.rate,onChange:e=>{let s=[...h];s[t].rate=e.target.value,g(s)},style:{width:"100%",marginBottom:5},type:"number"})]}),(0,n.jsxs)("div",{style:{marginBottom:5},children:[(0,n.jsx)("label",{children:"GST (%)"}),(0,n.jsx)("input",{value:e.gst,onChange:e=>{let s=[...h];s[t].gst=e.target.value,g(s)},style:{width:"100%",marginBottom:5},type:"number"})]}),(0,n.jsxs)("div",{style:{marginBottom:5},children:[(0,n.jsx)("label",{children:"HSN Code"}),(0,n.jsx)("input",{value:e.hsn,onChange:e=>{let s=[...h];s[t].hsn=e.target.value,g(s)},style:{width:"100%",marginBottom:5},type:"number"})]}),(0,n.jsx)("div",{style:{textAlign:"right"},children:(0,n.jsx)("button",{onClick:()=>p(t),style:{color:"red"},children:"Delete"})})]},t)),(0,n.jsx)("button",{onClick:()=>{g([...h,{name:"",quantity:"",rate:"",gst:"18",hsn:"998717"}])},children:"Add Product"})]}),(0,n.jsx)("button",{onClick:y,style:{backgroundColor:"#841584",color:"#fff",padding:10,borderRadius:5,width:"100%"},children:"Generate Invoice"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(9539)),_N_E=e.O()}]);