(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{3038:(e,a,t)=>{Promise.resolve().then(t.bind(t,9629))},9629:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var s=t(5155),n=t(2115),r=t(2651),l=t(5122),i=t(4665),c=t(2479),o=t(810),d=t(6456),u=t(9841);let m=()=>{let[e,a]=(0,n.useState)(!0),[t,m]=(0,n.useState)({name:"",mobile:"",address:""}),[h,x]=(0,n.useState)([]),[A,v]=(0,n.useState)(null),[g,j]=(0,n.useState)([]),[b,p]=(0,n.useState)("");(0,n.useEffect)(()=>{r.A.get("http://15.207.48.53:3000/nongstcustomer").then(e=>x(e.data)).catch(e=>console.error("Error fetching customers:",e))},[]);let C=(e,a)=>{m(t=>({...t,[e]:a}))},f=e=>{j(g.filter((a,t)=>t!==e))},N=async()=>{try{let e=await r.A.post("http://15.207.48.53:3000/generate-nongst-bill",{customerName:t.name,customerMobile:t.mobile,customerAddress:t.address,products:g.map(e=>({name:e.name,quantity:parseFloat(e.quantity),rate:parseFloat(e.rate)}))});200===e.status&&window.alert("Invoice generated successfully!")}catch(e){console.error("Error generating invoice:",e),window.alert("Failed to generate invoice.")}};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsx)(l.A,{variant:"contained",onClick:()=>a(!0),children:"New Customer"}),(0,s.jsx)(l.A,{variant:"contained",onClick:()=>a(!1),children:"Existing Customer"})]}),e?(0,s.jsx)(i.A,{className:"mb-6 p-4",children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(o.A,{variant:"h6",children:"New Customer Details"}),["name","mobile","address"].map(e=>(0,s.jsx)(d.A,{label:"Customer ".concat(e.charAt(0).toUpperCase()+e.slice(1)),value:t[e],onChange:a=>C(e,a.target.value),fullWidth:!0,margin:"dense"},e))]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"mb-6 p-4",children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(o.A,{variant:"h6",children:"Search Existing Customer"}),(0,s.jsx)(d.A,{label:"Search Customer",placeholder:"Search by name or mobile",value:b,onChange:e=>p(e.target.value),fullWidth:!0,margin:"dense"}),(0,s.jsx)(l.A,{variant:"outlined",onClick:()=>{let e=h.find(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.mobile.includes(b));e?(v(e),m(e)):window.alert("No customer matches your search.")},children:"Search"})]})}),A&&(0,s.jsx)(i.A,{className:"mb-6 p-4",children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(o.A,{variant:"h6",children:"Customer Details"}),["name","mobile","address"].map(e=>(0,s.jsx)(d.A,{label:"Customer ".concat(e.charAt(0).toUpperCase()+e.slice(1)),value:t[e],onChange:a=>C(e,a.target.value),fullWidth:!0,margin:"dense"},e))]})})]}),(0,s.jsx)(i.A,{className:"mb-6 p-4",children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(o.A,{variant:"h6",children:"Products"}),g.map((e,a)=>(0,s.jsxs)(i.A,{className:"mb-4 p-2",children:[(0,s.jsxs)(c.A,{children:[(0,s.jsxs)(o.A,{variant:"subtitle1",children:["Product ",a+1]}),(0,s.jsx)(d.A,{label:"Product Name",value:e.name,onChange:e=>{let t=[...g];t[a].name=e.target.value,j(t)},fullWidth:!0,margin:"dense"}),(0,s.jsx)(d.A,{label:"Quantity",value:e.quantity,onChange:e=>{let t=[...g];t[a].quantity=e.target.value,j(t)},fullWidth:!0,margin:"dense",type:"number"}),(0,s.jsx)(d.A,{label:"Rate",value:e.rate,onChange:e=>{let t=[...g];t[a].rate=e.target.value,j(t)},fullWidth:!0,margin:"dense",type:"number"})]}),(0,s.jsx)(u.A,{children:(0,s.jsx)(l.A,{variant:"outlined",color:"error",onClick:()=>f(a),children:"Delete"})})]},a)),(0,s.jsx)(l.A,{variant:"outlined",onClick:()=>{j([...g,{name:"",quantity:"",rate:""}])},children:"Add Product"})]})}),(0,s.jsx)(l.A,{variant:"contained",onClick:N,children:"Generate Invoice"})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[651,81,462,441,517,358],()=>a(3038)),_N_E=e.O()}]);