(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[282],{6852:(e,t,n)=>{Promise.resolve().then(n.bind(n,5299))},6046:(e,t,n)=>{"use strict";var r=n(6658);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},5299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(5155),a=n(2115),i=n(6046),o=n(2651),s=n(3691),l=n.n(s),d=n(3004),g=n(5565);let u=()=>{let[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)(!0),u=d.dr.UserName,p=(0,i.useRouter)(),m=d.dr.TempforViewing,[h,x]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[S,_]=(0,a.useState)(""),[C,I]=(0,a.useState)(""),[L,T]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=d.dr.TempforViewing;if(!e){window.alert("No vehicle ID found"),s(!1);return}(async()=>{try{let n=await fetch("http://15.207.48.53:3000/searchById?id=".concat(encodeURIComponent(e))),r=await n.json();0===r.length?window.alert("No details found for this vehicle"):(t(r[0]),v(r[0].agreed_amount.toString()),w(r[0].issued_to),x(r[0].received_amount.toString()),T(r[0].date),I(r[0].driver_expense.toString()),j(r[0].fuel_expense.toString()),_(r[0].maintenance.toString()))}catch(e){console.error("Error fetching data:",e),window.alert("Error fetching data: "+e.message)}finally{s(!1)}})()},[]);let A=async()=>{try{let e={};void 0!==f&&(e.agreed_amount=parseInt(f)),void 0!==h&&(e.received_amount=parseInt(h)),void 0!==b&&(e.fuel_expense=parseInt(b)),void 0!==S&&(e.maintenance=parseInt(S)),void 0!==C&&(e.driver_expense=parseInt(C)),void 0!==y&&(e.issued_to=y),void 0!==L&&(e.date=L);let t=await o.A.put("http://15.207.48.53:3000/updateCarDetails/".concat(m),e);200===t.status?(window.alert("Car details updated successfully."),p.back()):window.alert("Failed to update car details.")}catch(t){var e;console.error("Error updating car details:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),window.alert("An error occurred while updating car details.")}},N=l()(L,"DD/MM/YYYY").format("YYYY-MM-DD"),k=async()=>{try{let e=(b?parseInt(b):0)+(C?parseInt(C):0)+(S?parseInt(S):0),t={vehicle_number:m,agreed_amount:parseInt(f)||0,issued_to:y||"N/A",total_expenses:e,cleared_date:N},n=await o.A.post("http://15.207.48.53:3000/saveClearedDetails",t);200===n.status?(window.alert("Details saved successfully."),w("N/A"),v("0"),x("0"),j("0"),_("0"),I("0")):window.alert("Failed to save details.")}catch(t){var e;console.error("Error saving cleared details:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),window.alert("Vehicle is already cleared.")}},P=()=>{let t=f||(e?e.agreed_amount.toString():"0"),n=h||(e?e.received_amount.toString():"0");return parseInt(t,10)-parseInt(n,10)},D=async()=>{let e=P();if(e>0)try{let t=await o.A.post("http://15.207.48.53:3000/processPendingAmount",{vehicleId:m,pending_amount:e,customer_name:y});if(200===t.status||201===t.status)window.alert("Pending amount processed successfully."),await k(),w("N/A"),v("0"),x("0"),j("0"),_("0"),I("0");else{let e=t.data.message;window.alert("Failed to process pending amount: "+e)}}catch(e){var t,n;console.error("Error processing pending amount:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),window.alert("An error occurred while processing pending amount: "+((null===(n=e.response)||void 0===n?void 0:n.data.message)||e.message))}else window.alert("Pending amount must be greater than zero.")},R=async()=>{window.confirm("Did customer pay the full amount? (OK for Yes, Cancel for No)")?await k():await D()};return n?(0,r.jsx)("p",{children:"Loading..."}):e?(0,r.jsxs)("div",{style:{padding:"20px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(g.default,{src:"/images/usericon.png",alt:"User Icon",width:50,height:50,style:c.usrimg,className:"rounded-full"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginLeft:-15,marginTop:10},children:[(0,r.jsx)("p",{style:c.helloname,children:"Hello,"}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{style:c.username,children:u})]}),(0,r.jsx)(g.default,{src:"/images/Logout.png",alt:"logout",width:25,height:25,style:c.logoutimg})]}),(0,r.jsx)("div",{style:{margin:"25px",borderBottom:"1px solid black"}}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.default,{src:"/images/Car.png",alt:"Car",width:25,height:25,style:c.carlogo}),(0,r.jsx)("p",{style:c.headingOfHomePage,children:"Vehicle Details"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{style:c.innertextbelowHeadings,children:["Name of Vehicle :",(0,r.jsx)("br",{})]}),(0,r.jsx)("input",{style:c.input,value:e.name_of_vehicle,placeholder:e.name_of_vehicle,readOnly:!0}),(0,r.jsxs)("p",{style:c.innertextbelowHeadings,children:["Vehicle Number :",(0,r.jsx)("br",{})]}),(0,r.jsx)("input",{style:c.input,value:m||"",placeholder:m||"",readOnly:!0}),(0,r.jsxs)("p",{style:c.innertextbelowHeadings,children:["Issued To :",(0,r.jsx)("br",{})]}),(0,r.jsx)("input",{style:c.input,value:y,placeholder:"Event/Person Name",onChange:e=>w(e.target.value)}),(0,r.jsxs)("p",{style:c.innertextbelowHeadings,children:["Agreed Amount :",(0,r.jsx)("br",{})]}),(0,r.jsx)("input",{style:c.billinginput,value:f,placeholder:e.agreed_amount?e.agreed_amount.toString():"",onChange:e=>v(e.target.value),type:"number"}),(0,r.jsxs)("p",{style:c.innertextbelowHeadings,children:["Received Amount :",(0,r.jsx)("br",{})]}),(0,r.jsx)("input",{style:c.billinginput,value:h,placeholder:e.received_amount?e.received_amount.toString():"",onChange:e=>x(e.target.value),type:"number"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)("p",{style:{fontSize:15,marginLeft:950},children:"Date :"}),(0,r.jsx)("input",{style:{width:"30%",height:40,border:"1px solid gray",borderRadius:20,padding:"0 15px",backgroundColor:"#d3d3d3"},value:L,placeholder:e.date,onChange:e=>T(e.target.value)})]})]}),(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[(0,r.jsx)("p",{style:{marginLeft:40,fontSize:15,marginBottom:-15},children:"Driver Expense :"}),(0,r.jsx)("input",{style:{width:"30%",height:30,border:"1px solid gray",borderRadius:10,padding:"0 15px",backgroundColor:"#d3d3d3",marginLeft:180,marginTop:-30,fontSize:13},value:C,placeholder:e.driver_expense?e.driver_expense.toString():"",onChange:e=>I(e.target.value),type:"number"}),(0,r.jsx)("p",{style:c.otherexpensetext,children:"Fuel Expense :"}),(0,r.jsx)("input",{style:{width:"40%",height:30,border:"1px solid gray",borderRadius:10,padding:"0 15px",backgroundColor:"#d3d3d3",marginLeft:180,marginTop:-10,fontSize:13},value:b,placeholder:e.fuel_expense?e.fuel_expense.toString():"",onChange:e=>j(e.target.value),type:"number"}),(0,r.jsx)("p",{style:c.otherexpensetext,children:"Maintenance :"}),(0,r.jsx)("input",{style:{width:"40%",height:30,border:"1px solid gray",borderRadius:10,padding:"0 15px",backgroundColor:"#d3d3d3",marginLeft:180,marginTop:2,fontSize:13},value:S,placeholder:e.maintenance?e.maintenance.toString():"",onChange:e=>_(e.target.value),type:"number"})]}),(0,r.jsxs)("p",{style:{fontSize:18,marginLeft:20,marginTop:20},children:["Pending Amount : Rs.",P()]}),(0,r.jsx)("div",{style:c.savebutton,children:(0,r.jsx)("button",{onClick:()=>{window.confirm("Do you want to save the details?")&&A()},style:{padding:"10px 20px",backgroundColor:"#841584",color:"white",border:"none",borderRadius:5},children:"Save"})}),(0,r.jsx)("div",{style:{marginLeft:215,marginTop:-45,width:"40%"},children:(0,r.jsx)("button",{onClick:R,style:{padding:"10px 20px",backgroundColor:"#841584",color:"white",border:"none",borderRadius:5},children:"Clear"})})]}):(0,r.jsx)("div",{style:c.container,children:(0,r.jsx)("p",{style:c.error,children:"No details available for this vehicle."})})},c={username:{marginTop:-30,marginLeft:90,fontSize:16,fontWeight:"bold",color:"darkslategrey"},helloname:{marginTop:-50,marginLeft:90,fontSize:14},usrimg:{marginLeft:20,marginTop:20,width:"40px",height:"40px"},logoutimg:{marginTop:-30,marginLeft:1400,width:25,height:25},carlogo:{marginTop:10,marginLeft:20},headingOfHomePage:{marginLeft:60,marginTop:-28,fontSize:20,fontWeight:"500"},innertextbelowHeadings:{marginLeft:40,marginTop:9,fontSize:15},input:{width:"80%",height:40,border:"1px solid gray",borderRadius:20,padding:"0 20px",marginBottom:7,marginLeft:40,backgroundColor:"#d3d3d3"},billinginput:{width:"40%",height:35,border:"1px solid gray",borderRadius:20,padding:"0 20px",paddingBottom:6,marginBottom:7,marginLeft:40,backgroundColor:"#d3d3d3"},otherexpensetext:{marginTop:10,marginLeft:40,fontSize:15},savebutton:{width:"40%",marginLeft:30,marginTop:40,marginBottom:10},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"row",width:150,marginTop:5,margin:"0 auto"},error:{color:"red"}}},3004:(e,t,n)=>{"use strict";n.d(t,{K6:()=>i,dr:()=>r,jI:()=>a});let r={TempforViewing:null,totalPendingAmount:0,UserName:"OmSai",totalCount:0},a=()=>{try{let e=localStorage.getItem("totalPendingAmount"),t=localStorage.getItem("totalCount");null!==e&&(r.totalPendingAmount=Number(e)),null!==t&&(r.totalCount=Number(t))}catch(e){console.error("Error loading global state:",e)}},i=()=>{try{localStorage.setItem("totalPendingAmount",String(r.totalPendingAmount)),localStorage.setItem("totalCount",String(r.totalCount))}catch(e){console.error("Error saving global state:",e)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[586,565,651,441,517,358],()=>t(6852)),_N_E=e.O()}]);