(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{7208:(e,t,n)=>{Promise.resolve().then(n.bind(n,5379))},6046:(e,t,n)=>{"use strict";var a=n(6658);n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},5379:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(5155),r=n(2115),i=n(6046);function s(){let e=(0,i.useSearchParams)().get("bankName"),[t,n]=(0,r.useState)("last7days"),[s,l]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[h,u]=(0,r.useState)([]),[f,x]=(0,r.useState)(!1),p=(0,r.useCallback)(async()=>{x(!0);try{let n="http://15.207.48.53:3000/api/transactions?bankName=".concat(encodeURIComponent(e||""));if("custom"===t){if(!s||!d){window.alert("Validation Error: Please select both start and end dates for custom filter."),x(!1);return}n+="&filter=custom&start_date=".concat(encodeURIComponent(s),"&end_date=").concat(encodeURIComponent(d))}else n+="&filter=".concat(t);let a=await fetch(n);if(!a.ok){let e=await a.json();window.alert(e.message||"Something went wrong fetching transactions."),x(!1);return}let r=await a.json();u(r.transactions)}catch(e){console.error("Error fetching transactions:",e),window.alert("Unable to fetch transactions.")}finally{x(!1)}},[e,t,s,d]);return(0,r.useEffect)(()=>{e&&p()},[e,t,s,d,p]),(0,a.jsxs)("div",{style:o.container,children:[(0,a.jsxs)("h1",{style:o.header,children:["Transactions for ",e||"Unknown Bank"]}),(0,a.jsx)("div",{style:o.filterContainer,children:["last7days","lastMonth","last3Months","custom"].map(e=>(0,a.jsx)("button",{style:{...o.filterButton,...t===e?o.selectedFilter:{}},onClick:()=>n(e),children:"last7days"===e?"Last 7 Days":"lastMonth"===e?"Last Month":"last3Months"===e?"Last 3 Months":"Custom"},e))}),"custom"===t&&(0,a.jsxs)("div",{style:o.customDatesContainer,children:[(0,a.jsxs)("div",{style:o.datePickerContainer,children:[(0,a.jsx)("label",{style:o.dateLabel,children:"Start Date:"}),(0,a.jsx)("input",{type:"date",value:s,onChange:e=>l(e.target.value),style:o.datePickerInput})]}),(0,a.jsxs)("div",{style:o.datePickerContainer,children:[(0,a.jsx)("label",{style:o.dateLabel,children:"End Date:"}),(0,a.jsx)("input",{type:"date",value:d,onChange:e=>c(e.target.value),style:o.datePickerInput})]})]}),(0,a.jsx)("button",{style:o.refreshButton,onClick:p,children:f?"Loading...":"Refresh Transactions"}),(0,a.jsx)("div",{style:o.tableContainer,children:(0,a.jsxs)("div",{style:o.table,children:[(0,a.jsxs)("div",{style:o.tableHeader,children:[(0,a.jsx)("div",{style:{...o.headerCell,minWidth:100,textAlign:"center"},children:"Date"}),(0,a.jsx)("div",{style:{...o.headerCell,minWidth:80,textAlign:"center"},children:"Type"}),(0,a.jsx)("div",{style:{...o.headerCell,minWidth:80,textAlign:"center"},children:"Amount"}),(0,a.jsx)("div",{style:{...o.headerCell,minWidth:200,textAlign:"center"},children:"Description"})]}),0===h.length?(0,a.jsx)("p",{style:{...o.noTransactions,textAlign:"center"},children:"No transactions available for selected period."}):h.map(e=>(0,a.jsxs)("div",{style:o.tableRow,children:[(0,a.jsx)("div",{style:{...o.cell,minWidth:100,textAlign:"center"},children:new Date(e.transaction_date).toLocaleDateString()}),(0,a.jsx)("div",{style:{...o.cell,minWidth:80,textAlign:"center"},children:e.transaction_type}),(0,a.jsxs)("div",{style:{...o.cell,minWidth:80,textAlign:"center"},children:["Rs. ",e.amount]}),(0,a.jsx)("div",{style:{...o.cell,minWidth:200,textAlign:"center"},children:e.description})]},e.id))]})})]})}function l(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading Transactions..."}),children:(0,a.jsx)(s,{})})}let o={container:{padding:20,backgroundColor:"#fff",fontFamily:"Arial, sans-serif",minHeight:"100vh"},header:{fontSize:20,fontWeight:"bold",marginBottom:10},filterContainer:{display:"flex",justifyContent:"space-around",marginBottom:10,flexWrap:"wrap",gap:"10px"},filterButton:{padding:"10px 15px",backgroundColor:"#ccc",border:"none",borderRadius:5,cursor:"pointer",color:"#fff",fontWeight:"bold"},selectedFilter:{backgroundColor:"#007BFF"},customDatesContainer:{display:"flex",justifyContent:"space-around",marginBottom:10,flexWrap:"wrap",gap:"10px"},datePickerContainer:{display:"flex",flexDirection:"column",alignItems:"center"},dateLabel:{marginBottom:5},datePickerInput:{padding:10,borderRadius:5,border:"1px solid #ccc"},refreshButton:{backgroundColor:"#007BFF",padding:"10px 15px",border:"none",borderRadius:5,cursor:"pointer",color:"#fff",fontWeight:"bold",marginBottom:20},tableContainer:{overflowX:"auto"},table:{minWidth:"500px",border:"1px solid #ddd",borderRadius:5},tableHeader:{display:"flex",backgroundColor:"#f0f0f0",borderBottom:"1px solid #ddd"},headerCell:{flex:1,padding:10,fontWeight:"bold",textAlign:"center"},tableRow:{display:"flex",borderBottom:"1px solid #ddd"},cell:{flex:1,padding:10,textAlign:"center"},noTransactions:{textAlign:"center",margin:20,fontSize:16}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(7208)),_N_E=e.O()}]);