(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{6921:(e,t,a)=>{Promise.resolve().then(a.bind(a,3578))},3578:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(5155),s=a(2115),l=a(5565);let n=()=>{let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[i,c]=(0,s.useState)(""),[d,o]=(0,s.useState)("credit"),[h,u]=(0,s.useState)([]),[g,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("http://15.207.48.53:3000/getLedgerData"),a=await e.json();e.ok?(t(a),u(Array(a.length).fill(""))):c(a.message||"Failed to fetch ledger data")}catch(e){console.error("Error fetching ledger data:",e),c("An error occurred while fetching ledger data")}finally{n(!1)}})()},[]);let p=async()=>{if(null===g)return;let a=parseFloat(h[g]);if(isNaN(a)){alert("Please enter a valid numeric value for the amount.");return}let r=[...e],s=r[g].balance;"credit"===d?r[g].balance=s+a:r[g].balance=s-a;let l={customer_name:r[g].customer_name,modifyAmount:a,transactionType:d};try{let e=await fetch("http://15.207.48.53:3000/saveCustomerLedger",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),a=await e.json();a.message?(alert("Success: "+a.message),t(r),u(e=>{let t=[...e];return t[g]="",t}),m(null)):alert("Error: "+(a.error||"Failed to update ledger"))}catch(e){console.error(e),alert("An error occurred while saving the ledger")}};return a?(0,r.jsx)("p",{children:"Loading..."}):i?(0,r.jsx)("p",{style:{color:"red"},children:i}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"headerWrapper",children:[(0,r.jsxs)("div",{className:"headerLeft",children:[(0,r.jsx)(l.default,{src:"/usericon.png",width:40,height:40,alt:"User Icon"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Hello,"}),(0,r.jsx)("h2",{children:"OmSai"})]})]}),(0,r.jsx)(l.default,{src:"/Logout.png",width:25,height:25,alt:"Logout"})]}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{className:"ledgerList",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"ledgerItem",children:[(0,r.jsxs)("p",{children:["Customer Name: ",e.customer_name]}),(0,r.jsxs)("p",{children:["Balance: Rs. ",Number(e.balance).toFixed(2)]}),(0,r.jsxs)("p",{children:["Last Transaction Date: ",new Date(e.transaction_date).toLocaleString()]}),(0,r.jsx)("input",{type:"number",placeholder:"Modify Payment",value:h[t],onChange:e=>{let a=[...h];a[t]=e.target.value,u(a)}}),(0,r.jsx)("button",{onClick:()=>{o("credit"),m(t)},children:"Credit"}),(0,r.jsx)("button",{onClick:()=>{o("debit"),m(t)},children:"Debit"}),(0,r.jsx)("button",{onClick:p,disabled:g!==t,children:"Save"})]},t))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[565,441,517,358],()=>t(6921)),_N_E=e.O()}]);