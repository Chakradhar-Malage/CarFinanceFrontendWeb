(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{4235:(e,a,t)=>{Promise.resolve().then(t.bind(t,8356))},8356:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var s=t(5155),o=t(8803),r=t.n(o),c=t(2115),i=t(6046),l=t(5178),n=t.n(l),f=t(3691),b=t.n(f),x=t(3004),d=t(5565);let p=()=>{let[e,a]=(0,c.useState)([]),[t,o]=(0,c.useState)(!1),[l,f]=(0,c.useState)(""),[p,m]=(0,c.useState)([]),[u,g]=(0,c.useState)(0),[j,h]=(0,c.useState)(0),[k,w]=(0,c.useState)(0),[N,v]=(0,c.useState)(!1),[y,z]=(0,c.useState)({}),C=x.dr.UserName,T=(0,i.useRouter)();(0,c.useEffect)(()=>{n().setAppElement(document.body)},[]);let _=async()=>{if(!l){alert("Please select a month");return}o(!0);try{let e=await fetch("http://15.207.48.53:3000/export-month?month=".concat(l)),t=await e.json();e.ok?(a(t.results),g(t.totalAgreedAmount),h(t.totalExpenses),w(t.profit)):alert(t.message||"An error occurred")}catch(e){console.error("Error fetching export data:",e.message)}finally{o(!1)}},A=a=>{let t=e.filter(e=>e.vehicle_number===a);m(t);let s=0,o=0;t.forEach(e=>{s+=parseFloat(e.agreed_amount),o+=parseFloat(e.total_expenses)});let r=s-o;z({vehicle_number:a,totalAgreedAmount:s,totalExpenses:o,profit:r}),v(!0)},S=Array.from(new Set(e.map(e=>e.vehicle_number))).map(a=>e.find(e=>e.vehicle_number===a));return(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f safeArea",children:[(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f header",children:[(0,s.jsx)(d.default,{src:"/images/usericon.png",alt:"User Icon",width:55,height:55,className:"rounded-full margin-right-10"}),(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f user-text",children:[(0,s.jsx)("p",{className:"jsx-9bcecaf4aeafab7f helloname",children:"Hello,"}),(0,s.jsx)("p",{className:"jsx-9bcecaf4aeafab7f username",children:C})]}),(0,s.jsx)("button",{onClick:()=>T.push("/logout"),className:"jsx-9bcecaf4aeafab7f logout-button",children:(0,s.jsx)(d.default,{src:"/images/Logout.png",alt:"User Icon",width:25,height:25,className:"rounded-full"})})]}),(0,s.jsx)("div",{className:"jsx-9bcecaf4aeafab7f separator"}),(0,s.jsx)("button",{onClick:()=>T.push("/customer_ledger"),className:"jsx-9bcecaf4aeafab7f buttonledger",children:"Pending Ledger"}),(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f container",children:[t&&(0,s.jsx)("p",{className:"jsx-9bcecaf4aeafab7f loadingText",children:"Loading..."}),(0,s.jsx)("h2",{className:"jsx-9bcecaf4aeafab7f exportTitle",children:"Export Last Month Data"}),(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f monthPickerContainer",children:[(0,s.jsxs)("select",{value:l,onChange:e=>f(e.target.value),className:"jsx-9bcecaf4aeafab7f picker",children:[(0,s.jsx)("option",{value:"",className:"jsx-9bcecaf4aeafab7f",children:"Select Month"}),(0,s.jsx)("option",{value:"01",className:"jsx-9bcecaf4aeafab7f",children:"January"}),(0,s.jsx)("option",{value:"02",className:"jsx-9bcecaf4aeafab7f",children:"February"}),(0,s.jsx)("option",{value:"03",className:"jsx-9bcecaf4aeafab7f",children:"March"}),(0,s.jsx)("option",{value:"04",className:"jsx-9bcecaf4aeafab7f",children:"April"}),(0,s.jsx)("option",{value:"05",className:"jsx-9bcecaf4aeafab7f",children:"May"}),(0,s.jsx)("option",{value:"06",className:"jsx-9bcecaf4aeafab7f",children:"June"}),(0,s.jsx)("option",{value:"07",className:"jsx-9bcecaf4aeafab7f",children:"July"}),(0,s.jsx)("option",{value:"08",className:"jsx-9bcecaf4aeafab7f",children:"August"}),(0,s.jsx)("option",{value:"09",className:"jsx-9bcecaf4aeafab7f",children:"September"}),(0,s.jsx)("option",{value:"10",className:"jsx-9bcecaf4aeafab7f",children:"October"}),(0,s.jsx)("option",{value:"11",className:"jsx-9bcecaf4aeafab7f",children:"November"}),(0,s.jsx)("option",{value:"12",className:"jsx-9bcecaf4aeafab7f",children:"December"})]}),(0,s.jsx)("button",{onClick:_,className:"jsx-9bcecaf4aeafab7f button",children:"Export"})]}),(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f totalContainer",children:[(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f totalText",children:["Net Amount: Rs.",u.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f totalText",children:["Total Expenses: Rs.",j.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f totalText",children:["Profit: Rs.",k.toFixed(2)]})]}),S.length>0&&!t&&(0,s.jsx)("div",{className:"jsx-9bcecaf4aeafab7f",children:S.map(e=>(0,s.jsxs)("button",{onClick:()=>A(e.vehicle_number),className:"jsx-9bcecaf4aeafab7f carCard",children:["Car: ",e.vehicle_number]},e.vehicle_number))}),(0,s.jsxs)(n(),{isOpen:N,onRequestClose:()=>v(!1),contentLabel:"Car Records Modal",className:"modalContent",overlayClassName:"modalOverlay",children:[(0,s.jsxs)("h3",{className:"jsx-9bcecaf4aeafab7f modalTitle",children:["Monthly Record for ",y.vehicle_number]}),(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f totalsContainer",children:[(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f totalsText",children:["Total Agreed Amount: Rs. ",y.totalAgreedAmount]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f totalsText",children:["Total Expenses: Rs. ",y.totalExpenses]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f totalsText",children:["Total Profit: Rs. ",y.profit]})]}),(0,s.jsx)("div",{className:"jsx-9bcecaf4aeafab7f",children:p.map((e,a)=>(0,s.jsxs)("div",{className:"jsx-9bcecaf4aeafab7f carRecord",children:[(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f detailsText",children:["ID: ",e.id]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f detailsText",children:["Vehicle Number: ",e.vehicle_number]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f detailsText",children:["Agreed Amount: Rs.",e.agreed_amount]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f detailsText",children:["Customer: ",e.issued_to]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f detailsText",children:["Expenses: Rs.",e.total_expenses]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f detailsText",children:["Date: ",b()(e.cleared_at).format("YYYY-MM-DD")]}),(0,s.jsxs)("p",{className:"jsx-9bcecaf4aeafab7f detailsText",children:["Profit: Rs.",(e.agreed_amount-e.total_expenses).toFixed(2)]})]},a))}),(0,s.jsx)("button",{onClick:()=>v(!1),className:"jsx-9bcecaf4aeafab7f closeModalButton",children:"Close"})]})]}),(0,s.jsx)(r(),{id:"9bcecaf4aeafab7f",children:".safeArea.jsx-9bcecaf4aeafab7f{min-height:100vh;background-color:#f8f8f8}.header.jsx-9bcecaf4aeafab7f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:20px}.usernameContainer.jsx-9bcecaf4aeafab7f{margin-left:20px;text-align:left}.usrimg.jsx-9bcecaf4aeafab7f{margin-left:20px;margin-top:20px;width:50px;height:50px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-o-object-fit:cover;object-fit:cover}.user-text.jsx-9bcecaf4aeafab7f{margin-right:1350px;padding-left:10px}.helloname.jsx-9bcecaf4aeafab7f{margin:0;font-size:14px;margin-bottom:0px;margin-top:0px}.username.jsx-9bcecaf4aeafab7f{margin:0;font-size:16px;font-weight:bold;color:darkslategrey;margin-top:0px}.logout-button.jsx-9bcecaf4aeafab7f{position:absolute;top:20px;right:20px;background:none;border:none;cursor:pointer}.logoutimg.jsx-9bcecaf4aeafab7f{width:25px;height:25px}.separator.jsx-9bcecaf4aeafab7f{margin:25px 20px;border-bottom:1px solid#000}.buttonledger.jsx-9bcecaf4aeafab7f{background-color:#841584;color:white;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:150px;height:42px;margin:10px 15px;cursor:pointer}.container.jsx-9bcecaf4aeafab7f{padding:10px;text-align:center}.loadingText.jsx-9bcecaf4aeafab7f{font-size:18px;font-weight:bold;color:#4caf50;margin-top:20px}.exportTitle.jsx-9bcecaf4aeafab7f{font-size:16px;font-weight:bold;margin:10px 0 30px}.monthPickerContainer.jsx-9bcecaf4aeafab7f{margin:0 auto 20px;width:90%;padding:5px;border:2px solid black;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.picker.jsx-9bcecaf4aeafab7f{height:56px;width:95%;border:1px solid#ccc;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;padding:5px;font-size:16px;margin-bottom:10px}.button.jsx-9bcecaf4aeafab7f{background-color:#841584;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:200px;color:white;font-weight:bold;cursor:pointer;margin-bottom:10px}.totalContainer.jsx-9bcecaf4aeafab7f{background-color:#fff;padding:15px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);width:100%;margin:55px auto 20px;margin-top:10px;text-align:center}.totalText.jsx-9bcecaf4aeafab7f{font-size:16px;font-weight:bold;margin-bottom:10px;color:#333}.carCard.jsx-9bcecaf4aeafab7f{margin:5px auto;padding:15px;border:1px solid#ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;width:300px;background-color:#fff;cursor:pointer;display:block}.carRecord.jsx-9bcecaf4aeafab7f{margin:5px auto;padding:15px;border:1px solid#ccc;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;width:275px;background-color:#fff;text-align:left}.detailsText.jsx-9bcecaf4aeafab7f{font-size:15px;color:#333;margin-bottom:5px}.modalContent.jsx-9bcecaf4aeafab7f{background-color:#fff;padding:15px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;width:325px;margin:auto;max-height:80vh;overflow-y:auto}.modalOverlay.jsx-9bcecaf4aeafab7f{background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.modalTitle.jsx-9bcecaf4aeafab7f{font-size:18px;font-weight:bold;margin-bottom:10px;text-align:center}.totalsContainer.jsx-9bcecaf4aeafab7f{margin-bottom:10px;text-align:center}.totalsText.jsx-9bcecaf4aeafab7f{font-size:15px;margin-bottom:5px}.closeModalButton.jsx-9bcecaf4aeafab7f{background-color:#841584;color:white;padding:10px 20px;border:none;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;cursor:pointer;margin-top:10px}"})]})}},3004:(e,a,t)=>{"use strict";t.d(a,{K6:()=>r,dr:()=>s,jI:()=>o});let s={TempforViewing:null,totalPendingAmount:0,UserName:"OmSai",totalCount:0},o=()=>{try{let e=localStorage.getItem("totalPendingAmount"),a=localStorage.getItem("totalCount");null!==e&&(s.totalPendingAmount=Number(e)),null!==a&&(s.totalCount=Number(a))}catch(e){console.error("Error loading global state:",e)}},r=()=>{try{localStorage.setItem("totalPendingAmount",String(s.totalPendingAmount)),localStorage.setItem("totalCount",String(s.totalCount))}catch(e){console.error("Error saving global state:",e)}}}},e=>{var a=a=>e(e.s=a);e.O(0,[586,565,473,441,517,358],()=>a(4235)),_N_E=e.O()}]);